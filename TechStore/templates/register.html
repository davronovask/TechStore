<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Регистрация — DvrnTechStore</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <!-- Рабочий Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
      color: #fff;
      min-height: 100vh;
    }
    .gradient-text {
      background: linear-gradient(45deg, #ff3b3b, #ff6b6b, #ff3b3b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    input:focus {
      outline: none;
      border-color: #ff3b3b;
      box-shadow: 0 0 8px #ff3b3b;
    }
    button {
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #e02e2e;
    }
    .password-wrapper {
      position: relative;
    }
    .toggle-password {
      position: absolute;
      top: 50%;
      right: 12px;
      transform: translateY(-50%);
      cursor: pointer;
      color: #aaa;
      transition: color 0.3s ease;
    }
    .toggle-password:hover {
      color: #ff3b3b;
    }
    body.light-theme {
      background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
      color: #2d3748;
      transition: all 0.3s ease;
    }

    body.light-theme header {
      background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%);
      color: #2d3748;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    body.light-theme .gradient-text {
      background: linear-gradient(45deg, #d94a4a, #e06b6b, #d94a4a);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    body.light-theme input {
      background-color: #f1f5f9;
      color: #2d3748;
      border-color: #ccc;
    }

    body.light-theme input::placeholder {
      color: #a0aec0;
    }

    body.light-theme input:focus {
      border-color: #ff3b3b;
      box-shadow: 0 0 8px #ff3b3b;
      outline: none;
    }

    body.light-theme button {
      background-color: #ff3b3b;
      color: white;
      transition: background-color 0.3s ease;
    }

    body.light-theme button:hover {
      background-color: #e02e2e;
    }

    body.light-theme .bg-gray-900 {
      background: linear-gradient(135deg, #e2e8f0 0%, #f1f5f9 100%) !important;
    }

    body.light-theme .bg-black {
      background: #ffffff !important;
    }

    body.light-theme .text-white {
      color: #2d3748 !important;
    }

    body.light-theme .text-gray-400 {
      color: #718096 !important;
    }

    body.light-theme .border-gray-700 {
      border-color: #cbd5e0 !important;
    }

  </style>
</head>
<body>
  <header class="fixed top-0 w-full bg-black bg-opacity-90 z-50 shadow-md">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center space-x-3">
        <div class="w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center">
          <span class="text-white font-bold text-xl">D</span>
        </div>
        <h1 class="text-2xl font-bold gradient-text">DvrnTechStore</h1>
      </div>
      <nav class="hidden md:flex space-x-6 text-white">
        <button id="theme-toggle" class="text-white hover:text-red-500 transition-colors ml-4" title="Переключить тему">
          <i class="fas fa-moon"></i>
        </button>

        <a href="{% url 'home' %}" class="hover:text-red-500">Главная</a>
        <a href="#" class="hover:text-red-500">Каталог</a>
        <a href="{% url 'login' %}" class="hover:text-red-500">Вход</a>
      </nav>
    </div>
  </header>

  <main class="flex items-center justify-center min-h-screen pt-20 px-4">
    <section class="bg-gray-900 rounded-xl shadow-lg max-w-md w-full p-8">
      <h2 class="text-3xl font-bold mb-6 text-center gradient-text">Регистрация</h2>

      {% if error %}
        <p class="text-red-800 bg-gray-300 text-center font-semibold mb-4 rounded-lg p-2 shadow">{{ error }}</p>
      {% endif %}

      <form method="post" class="space-y-6" novalidate>
        {% csrf_token %}

        <div>
          <label for="nickname" class="block mb-2 font-semibold">Никнейм</label>
          <input type="text" id="nickname" name="nickname" required minlength="3" maxlength="20" placeholder="Введите никнейм" class="w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 text-white placeholder-gray-400"/>
        </div>

        <div>
          <label for="email" class="block mb-2 font-semibold">Email</label>
          <input type="email" id="email" name="email" required placeholder="...@gmail.com" class="w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 text-white placeholder-gray-400"/>
        </div>

        <div class="password-wrapper">
          <label for="password" class="block mb-2 font-semibold">Пароль</label>
          <input type="password" id="password" name="password" required minlength="6" placeholder="Введите пароль" class="w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 text-white placeholder-gray-400"/>
          <span class="toggle-password" data-target="password" title="Показать/скрыть пароль">
            <i class="fa-solid fa-eye"></i>
          </span>
        </div>

        <div class="password-wrapper">
          <label for="confirmPassword" class="block mb-2 font-semibold">Подтверждение пароля</label>
          <input type="password" id="confirmPassword" name="confirmPassword" required minlength="6" placeholder="Повторите пароль" class="w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 text-white placeholder-gray-400"/>
          <span class="toggle-password" data-target="confirmPassword" title="Показать/скрыть пароль">
            <i class="fa-solid fa-eye"></i>
          </span>
        </div>

        <button type="submit" class="w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 rounded-lg">Зарегистрироваться</button>
      </form>

      <p class="mt-6 text-center text-gray-400">
        Уже есть аккаунт?
        <a href="{% url 'login' %}" class="text-red-500 hover:underline">Войти</a>
      </p>
    </section>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.toggle-password').forEach(toggle => {
        toggle.addEventListener('click', () => {
          const targetId = toggle.getAttribute('data-target');
          const input = document.getElementById(targetId);
          if (input.type === 'password') {
            input.type = 'text';
            toggle.innerHTML = '<i class="fa-solid fa-eye-slash"></i>';
          } else {
            input.type = 'password';
            toggle.innerHTML = '<i class="fa-solid fa-eye"></i>';
          }
        });
      });
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Восстановление темы из localStorage
      const themeToggle = document.getElementById('theme-toggle');
      const themeIcon = themeToggle.querySelector('i');

      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'light') {
        document.body.classList.add('light-theme');
        themeIcon.className = 'fas fa-sun';
      }

      themeToggle.addEventListener('click', () => {
        if (document.body.classList.contains('light-theme')) {
          document.body.classList.remove('light-theme');
          localStorage.setItem('theme', 'dark');
          themeIcon.className = 'fas fa-moon';
        } else {
          document.body.classList.add('light-theme');
          localStorage.setItem('theme', 'light');
          themeIcon.className = 'fas fa-sun';
        }
      });
    });
  </script>

</body>
</html>
